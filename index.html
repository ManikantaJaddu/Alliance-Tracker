<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Alliance Tracker</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, sans-serif;
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px;
      box-sizing: border-box;
    }

    h2 {
      text-align: center;
      background: linear-gradient(to right, #1e3c72, #2a5298);
      color: white;
      padding: 15px 25px;
      border-radius: 12px;
      box-shadow: 0px 3px 12px rgba(0, 0, 0, 0.2);
      font-size: 2rem;
      letter-spacing: 1px;
      margin-bottom: 20px;
      animation: fadeInDown 1s ease;
    }

    @keyframes fadeInDown {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .iframe-container {
      display: flex;
      justify-content: center;
      width: 100%;
      animation: fadeIn 1.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    iframe {
      border: none;
      border-radius: 15px;
      box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.3);
      background: white;
      width: 95%;
      max-width: 1000px;
      height: 800px;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

    iframe:hover {
      transform: scale(1.02);
      box-shadow: 0px 12px 30px rgba(0, 0, 0, 0.35);
    }

    @media (max-width: 768px) {
      h2 {
        font-size: 1.5rem;
        padding: 10px 20px;
      }

      iframe {
        height: 600px;
      }
    }
  </style>

  <script>
    function fillLocationAndTime() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            const lat = Number(position.coords.latitude.toFixed(6));
            const lon = Number(position.coords.longitude.toFixed(6));

            const now = new Date();
            const day = String(now.getDate()).padStart(2, "0");
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const month = monthNames[now.getMonth()];
            const year = now.getFullYear();
            const dateStr = `${day}-${month}-${year}`;
            const timeStr = now.toLocaleTimeString("en-GB");

            const latField = "GPS_Lat";
            const lonField = "GPS_Long";
            const dateField = "GPS_Date";
            const timeField = "GPS_Time";

            const formUrl =
              "https://creatorapp.zohopublic.com/allianceproitpvtltd/emp-tracker/form-embed/GPS_Tracker/F1qTgmwUVO8PyCm5MO0QjpE1Qy6rg6MBAAym2fw1aXnZD8AzvzD1O5mVJUwN5wFMAet29ewsOX3j9CwgdvjXRDaH56fN8rk0ejt7" +
              `?${latField}=${lat}&${lonField}=${lon}&${dateField}=${dateStr}&${timeField}=${timeStr}`;

            document.getElementById("zohoForm").src = formUrl;
          },
          function (error) {
            alert("‚ùå Error getting location: " + error.message);
          }
        );
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }

    window.onload = fillLocationAndTime;
  </script>
</head>

<body>
  <h2>üìç Alliance Pro Employee Tracker</h2>
  <div class="iframe-container">
    <iframe id="zohoForm" allow="geolocation"></iframe>
  </div>
</body>

</html>
