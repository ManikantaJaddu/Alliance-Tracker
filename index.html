<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Alliance Tracker</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden; /* Prevent page scrollbars */
      height: 100%;
    }
    iframe {
      border: none;
      overflow: hidden; /* Hide iframe scrollbars */
      display: block;
      width: 100%;
      height: 1500px; /* Adjust this until the whole form fits */
    }
  </style>
  <script>
    function fillLocationAndTime() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            const lat = Number(position.coords.latitude.toFixed(6));
            const lon = Number(position.coords.longitude.toFixed(6));

            const now = new Date();
            const day = String(now.getDate()).padStart(2, "0");
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const month = monthNames[now.getMonth()];
            const year = now.getFullYear();
            const dateStr = `${day}-${month}-${year}`;
            const timeStr = now.toLocaleTimeString("en-GB");

            const latField = "GPS_Lat";
            const lonField = "GPS_Long";
            const dateField = "GPS_Date";
            const timeField = "GPS_Time";

            const formUrl =
              "https://creatorapp.zohopublic.com/allianceproitpvtltd/emp-tracker/form-embed/GPS_Tracker/F1qTgmwUVO8PyCm5MO0QjpE1Qy6rg6MBAAym2fw1aXnZD8AzvzD1O5mVJUwN5wFMAet29ewsOX3j9CwgdvjXRDaH56fN8rk0ejt7" +
              `?${latField}=${lat}&${lonField}=${lon}&${dateField}=${dateStr}&${timeField}=${timeStr}`;

            document.getElementById("zohoForm").src = formUrl;
          },
          function (error) {
            alert("‚ùå Error getting location: " + error.message);
          }
        );
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }

    window.onload = fillLocationAndTime;
  </script>
</head>
<body>
  <h2>Alliance Pro Employee Tracker</h2>
  <iframe
    id="zohoForm"
    frameborder="0"
    allow="geolocation"
    scrolling="no"
  ></iframe>
</body>
</html>
